<script src=lib1.js></script>

<body bgcolor=black>
<center>
<canvas id='canvas1' width='600' height='600'>
</canvas>
</center>
</body>


<script id='vs' type='other'>
   attribute vec3 aPosition;
   varying   vec3 vPosition;
   void main() {
      gl_Position = vec4(aPosition, 1.0);
      vPosition = aPosition;
   }
</script>


<script id='fs' type='other'>
   precision mediump float;
   uniform float uTime;
   uniform vec3  uCursor;
   varying vec3  vPosition;

   // COMPUTE THE Z FOR A SPHERE OF RADIUS r.

   float computeZ(vec2 xy, float r) {
      float zz = r * r - xy.x * xy.x - xy.y * xy.y;
      if (zz < 0.)
         return -1.;
      else
         return sqrt(zz);
   }

   bool isMouseClicked(){
      // float d = uCursor.z;
      // return (d < 1) ? true : false;
      return true;
   }

   void main() {

      /*
      //CREATE A VARIABLE TO STORED THE COLOR
      vec3 color = vec3(0.5,0.1,0.2);

      //CREATE FLOAT VARIABLES REPRESENTING X AND Y VALS OF PIXEL
      float x = vPosition.x;
      float y = vPosition.y;

      //CREATE A VARIABLE THAT REPRESENTS WHETHER OR NOT THE MOUSE IS CLICKED
     // boolean click = (uCursor.z < 1) ? true : false;

      //ANIMATE PIXEL
      //x *= 2.0 + cos(sin(uTime) + 5.0);
     // y *= 2.0 + sin(cos(uTime) + 5.0);

      //CREATE VARIABLE FOR RADIUS OF THE CIRCLE (PYTHAGOROUS)
      float radiusSquared = 5.*(x*x + y*y);
      
      float background = 0.0;
      float light = 1.0;

      if (radiusSquared < 1.0)
      {
         float radius = sqrt(2.-radiusSquared/0.15);
       //  float d = dot(vec3(x,y,z), vec3(1.,1.,1.));

         //CREATE A VECTOR BETWEEN THE PIXEL AND CURSOR
         vec3 diff = vPosition - uCursor;

         //CREATE A VARIABLE TO STORE THE DISTANCE OF THE PIXEL FROM THE CURSOR
         light = length(diff);

         // dist *= 0.2;

         //ANITMATE COLOURS
       //  color.x *= sin(diff);
         //color.y *= cos(diff);
         gl_FragColor = vec4(light * color, 1.0);
      }  else {
         gl_FragColor = vec4(background * color, 1.0);
      }

      // MULTIPY SHADE BY "WOOD" COLOR.

      */

      vec2 pos = mod(vec2(vPosition.xy), vec2(50.0)*sin(uTime/2.)) - vec2(25.0)*sin(uTime/2.);
      float dist_squared = dot(pos, pos);

     // if ((dist_squared > 575.0) || (dist_squared < 100.0))discard;

       gl_FragColor = mix(vec4(.90, .90, .90, 1.0), vec4(.20, .20*sin(uTime), .40, 1.0),smoothstep(380.25, 420.25, dist_squared));
   }
</script>


<script>
start_gl("canvas1", getStringFromScript('vs'), getStringFromScript('fs'));
</script>

